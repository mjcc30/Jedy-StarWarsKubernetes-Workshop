# ==========================================
# üé® Frontend Deployment
# ==========================================
apiVersion: apps/v1
kind: Deployment
metadata:
  name: front-deployment # Name of the frontend Deployment
  namespace: starwars
spec:
  replicas: 1
  selector:
    matchLabels:
      app: front # Must match the label in the pod template
  template:
    metadata:
      labels:
        app: front # Must match the selector above
    spec:
      containers:
        - name: client
          image: jedy-frontend:latest  # Docker image for the frontend
          imagePullPolicy: IfNotPresent # Use local image if available
          ports:
            - containerPort: 4321 # Container port
          env:
             # In a real K8s setup, we use an Ingress/Gateway.
             # For Level 3, we haven't set that up yet, so the Frontend
             # might fail to reach the Backend via /api unless we proxy or hardcode.
            - name: API_URL
              value: "http://localhost:4000" 
---
# ==========================================
# üåç Frontend Service
# ==========================================
# This exposes the Frontend internally within the cluster.
apiVersion: v1
kind: Service
metadata:
  name: front-service # Name of the frontend Service
  namespace: starwars
spec:
  # ClusterIP is the default. It gives an internal IP.
  # To access it from outside, we will use 'kubectl port-forward'.
  type: ClusterIP 
  selector:
    app: front # Must match the label in the Deployment
  ports:
    - name: http # Name of the port
      protocol: TCP # Protocol used
      port: 4321 # Service port
      targetPort: 4321 # Target port on the pod